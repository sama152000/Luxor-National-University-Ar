<div class="faculty-details-container" dir="rtl">
  <div class="container-custom">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>جاري تحميل تفاصيل الكلية...</p>
    </div>

    <!-- Faculty Content -->
    <div *ngIf="!isLoading && faculty" class="faculty-content">
      <!-- Back Button -->
      <div class="back-button-container fade-in">
        <button class="btn-back" (click)="goBack()">
          <i class="pi pi-arrow-right"></i>
          العودة للكليات
        </button>
      </div>

      <!-- Faculty Header -->
      <div class="faculty-header slide-up animate-delay-1">
        <h2 class="faculty-title">{{ faculty.name }}</h2>
        <p class="faculty-description">{{ faculty.fullDescription }}</p>
      </div>

      <!-- Image Slider -->
      <div class="image-slider slide-up animate-delay-2" *ngIf="faculty.images && faculty.images.length > 0">
        <div class="slider-container">
          <div class="main-image">
            <img [src]="getCurrentImage()" [alt]="faculty.name" loading="eager">
            <button *ngIf="hasMultipleImages()" class="slider-arrow slider-arrow-right" (click)="previousImage()">
              <i class="pi pi-chevron-right"></i>
            </button>
            <button *ngIf="hasMultipleImages()" class="slider-arrow slider-arrow-left" (click)="nextImage()">
              <i class="pi pi-chevron-left"></i>
            </button>
          </div>
          <div class="slider-indicators" *ngIf="hasMultipleImages()">
            <button *ngFor="let image of faculty.images; let i = index"
                    class="indicator"
                    [class.active]="i === currentImageIndex"
                    (click)="goToImage(i)">
            </button>
          </div>
        </div>
      </div>

      <!-- About Faculty Section -->
      <div class="about-section slide-up animate-delay-3">
        <h2 class="section-title">عن الكلية</h2>
        <div class="tabs-container">
          <div class="tabs-wrapper">
            <div class="tabs-list">
              <button *ngFor="let section of aboutSections"
                      class="tab-item"
                      [class.active]="isActiveAboutSection(section.id)"
                      (click)="setActiveAboutSection(section.id)">
                <i [class]="section.icon"></i>
                <span>{{ section.title }}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="about-content">
          <div class="content-wrapper" [innerHTML]="getAboutContent()"></div>
        </div>
      </div>

      <!-- Programs Section -->
      <div class="programs-section slide-up animate-delay-4">
        <h2 class="section-title">برامج الكلية</h2>
        <div class="programs-grid">
          <div *ngFor="let program of paginatedPrograms; let i = index"
               class="program-card hover-lift"
               [class]="'animate-delay-' + (i % 4 + 1)"
               (click)="openProgramModal(program)">
            <div class="program-header">
              <div class="degree-badge">{{ program.name }}</div>
            </div>
            <div class="program-content">
              <button class="btn btn-primary">
                عرض التفاصيل
                <i class="pi pi-arrow-left"></i>
              </button>
            </div>
          </div>
        </div>
        <!-- Programs Pagination -->
        <div *ngIf="totalProgramsPages > 1" class="pagination-container">
          <div class="pagination">
            <button class="pagination-btn"
                    [disabled]="currentProgramsPage === 1"
                    (click)="previousProgramsPage()">
              <i class="pi pi-angle-right"></i> السابق
            </button>
            <div class="page-numbers">
              <button *ngFor="let pageNum of getProgramsPageNumbers()"
                      class="page-number"
                      [class.active]="pageNum === currentProgramsPage"
                      (click)="goToProgramsPage(pageNum)">
                {{ pageNum }}
              </button>
            </div>
            <button class="pagination-btn"
                    [disabled]="currentProgramsPage === totalProgramsPages"
                    (click)="nextProgramsPage()">
              التالي <i class="pi pi-angle-left"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Staff Section -->
      <div class="staff-section slide-up animate-delay-5">
        <h2 class="section-title">أعضاء هيئة التدريس</h2>
        <div class="staff-grid">
          <div *ngFor="let staffMember of paginatedStaff; let i = index"
               class="staff-card hover-lift"
               [class]="'animate-delay-' + (i % 4 + 1)"
               [class.dean-card]="staffMember.isDean"
               (click)="openStaffModal(staffMember)">
            <div class="staff-image">
              <img [src]="staffMember.image" [alt]="staffMember.name">
              <div *ngIf="staffMember.isDean" class="dean-badge">
                <i class="pi pi-star"></i> عميد الكلية
              </div>
            </div>
            <div class="staff-content">
              <h3 class="staff-name">{{ staffMember.name }}</h3>
              <p class="staff-position">{{ staffMember.position }}</p>
              <button class="btn btn-primary">
                عرض التفاصيل <i class="pi pi-arrow-left"></i>
              </button>
            </div>
          </div>
        </div>
        <!-- Staff Pagination -->
        <div *ngIf="totalStaffPages > 1" class="pagination-container">
          <div class="pagination">
            <button class="pagination-btn"
                    [disabled]="currentStaffPage === 1"
                    (click)="previousStaffPage()">
              <i class="pi pi-angle-right"></i> السابق
            </button>
            <div class="page-numbers">
              <button *ngFor="let pageNum of getStaffPageNumbers()"
                      class="page-number"
                      [class.active]="pageNum === currentStaffPage"
                      (click)="goToStaffPage(pageNum)">
                {{ pageNum }}
              </button>
            </div>
            <button class="pagination-btn"
                    [disabled]="currentStaffPage === totalStaffPages"
                    (click)="nextStaffPage()">
              التالي <i class="pi pi-angle-left"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="!isLoading && !faculty" class="error-state">
      <i class="pi pi-exclamation-triangle"></i>
      <h3>الكلية غير موجودة</h3>
      <p>عذراً، لم نتمكن من العثور على الكلية المطلوبة</p>
      <button class="btn btn-primary" (click)="goBack()">العودة للكليات</button>
    </div>
  </div>

  <!-- Program Modal -->
  <div *ngIf="showProgramModal" class="modal-overlay" (click)="closeProgramModal()">
    <div class="modal-content program-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ selectedProgram?.name }}</h2>
        <button class="modal-close" (click)="closeProgramModal()">
          <i class="pi pi-times"></i>
        </button>
      </div>
      <div class="modal-body" *ngIf="selectedProgram">
        <!-- Program Tabs -->
        <div class="program-tabs">
          <div class="tabs-list">
            <button *ngFor="let tab of programTabs"
                    class="tab-item"
                    [class.active]="isActiveProgramTab(tab.id)"
                    (click)="setActiveProgramTab(tab.id)">
              <i [class]="tab.icon"></i>
              <span>{{ tab.title }}</span>
            </button>
          </div>
        </div>
        <!-- Program Tab Content -->
        <div class="program-tab-content">
          <div class="content-wrapper">
            <div *ngIf="isActiveProgramTab('overview')" [innerHTML]="selectedProgram?.overview"></div>
            <div *ngIf="isActiveProgramTab('vision')" [innerHTML]="selectedProgram?.vision"></div>
            <div *ngIf="isActiveProgramTab('mission')" [innerHTML]="selectedProgram?.mission"></div>
            <div *ngIf="isActiveProgramTab('goals')" [innerHTML]="selectedProgram?.goals"></div>
            <div *ngIf="isActiveProgramTab('details')" [innerHTML]="selectedProgram?.details"></div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Staff Modal -->
  <div *ngIf="showStaffModal" class="modal-overlay" (click)="closeStaffModal()">
    <div class="modal-content staff-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ selectedStaff?.name }}</h2>
        <button class="modal-close" (click)="closeStaffModal()">
          <i class="pi pi-times"></i>
        </button>
      </div>
      
      <div class="modal-body" *ngIf="selectedStaff">
        <div class="staff-profile">
          <div class="profile-image">
            <img [src]="selectedStaff.image" [alt]="selectedStaff.name">
          </div>
          
          <div class="profile-info">
            <h4>{{ selectedStaff.name }}</h4>
            <p class="position">{{ selectedStaff.position }}</p>
            
          
        </div>
        
       
      </div>
    </div>
  </div>
</div>